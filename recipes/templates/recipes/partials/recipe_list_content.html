{% load static %}

<!-- –û–±'—î–¥–Ω–∞–Ω–∏–π –±–ª–æ–∫: –ì–µ—Ä–æ–π –∑ –≤—ñ–¥–µ–æ—Ñ–æ–Ω–æ–º —Ç–∞ –∫–Ω–æ–ø–∫–æ—é -->
<div class="hero-section">
  <div class="video-background">
    <iframe
      src="https://player.vimeo.com/video/1081473913?autoplay=1&muted=1&loop=1&background=1"
      frameborder="0"
      allow="autoplay; fullscreen"
      allowfullscreen>
    </iframe>
    <div class="video-overlay"></div>
  </div>

  <div class="hero-content">
    <div class="logo-container">
      <img src="{% static 'recipes/logo.jpg' %}" alt="–õ–æ–≥–æ" class="hero-logo">
      <div class="logo-shine"></div>
    </div>
    <h1 class="hero-title">
      <span class="title-line">–°—Ç–≤–æ—Ä—é–π,</span>
      <span class="title-line">–∑–±–µ—Ä—ñ–≥–∞–π</span>
      <span class="title-line">—Ç–∞ –¥—ñ–ª–∏—Å—å</span>
    </h1>

    <div class="hero-button-container">
      {% if user.is_authenticated %}
      <a href="{% url 'add_recipe' %}" class="create-recipe-button"
         hx-get="{% url 'add_recipe' %}" hx-target="#main-content" hx-push-url="true">
        <span class="button-icon">‚ú®</span>
        <span class="button-text">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–µ—Ü–µ–ø—Ç</span>
      </a>
      {% else %}
      <a href="{% url 'login' %}" class="create-recipe-button">
        <span class="button-icon">üîí</span>
        <span class="button-text">–£–≤—ñ–π—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Ü–µ–ø—Ç—É</span>
      </a>
      {% endif %}
    </div>
  </div>
</div>

<!-- –ë–ª–æ–∫ 3: –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
<div class="categories-carousel-container">
  <div class="categories-header">
    <h2 class="categories-title">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h2>
    <div class="categories-divider"></div>
  </div>

  <div class="swiper categories-carousel">
    <div class="swiper-wrapper">
      {% for category in categories %}
      <a href="{% url 'all_recipes' %}?category={{ category.id }}" class="swiper-slide category-card" data-category="{{ category.id }}">
        <div class="category-card-inner">
          {% if category.image %}
            <div class="category-image">
              <img src="{{ category.image.url }}" alt="{{ category.name }}">
              <div class="image-overlay"></div>
            </div>
          {% else %}
            <div class="category-icon">
              <i class="fas {{ category.icon }}"></i>
            </div>
          {% endif %}
          <h3 class="category-name">{{ category.name }}</h3>
          <div class="category-overlay">
            <span>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</span>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>

<!-- –ë–ª–æ–∫ 4: –û—Å—Ç–∞–Ω–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏ -->
<div class="latest-recipes-section" style=" padding-left: 20px; padding-right: 20px;">
  <div class="categories-header">
    <h2 class="categories-title">–ù–æ–≤—ñ –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è</h2>
    <div class="categories-divider"></div>
  </div>

  <div class="recipes-grid">
    {% for recipe in recipes %}
    <div class="recipe-card">
      <div class="recipe-img-container">
        {% if recipe.image %}
        <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-img">
        {% else %}
        <div class="no-image-placeholder">
          <i class="fas fa-utensils"></i>
        </div>
        {% endif %}
      </div>
      <div class="recipe-content">
        <h3 class="recipe-title">{{ recipe.title }}</h3>
        <p class="recipe-meta">
          {% if recipe.categories.all %}
          <span class="type">{{ recipe.categories.first.name }}</span> ‚Ä¢
          {% endif %}
          –ê–≤—Ç–æ—Ä: {{ recipe.author.username }} ‚Ä¢ –î–∞—Ç–∞: {{ recipe.created_at|date:"d.m.Y" }}
        </p>
        <a href="{% url 'recipe_detail' recipe.id %}" class="btn">–î–µ—Ç–∞–ª—ñ</a>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="view-all-container">
    <a href="{% url 'all_recipes' %}" class="view-all-link"
       hx-get="{% url 'all_recipes' %}" hx-target="#main-content" hx-push-url="true">
      –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ —Ä–µ—Ü–µ–ø—Ç–∏ <i class="fas fa-arrow-right"></i>
    </a>
  </div>
</div>